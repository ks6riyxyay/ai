<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Escravo AI</title>
  <link rel="stylesheet" href="public/style.css">
</head>

<body>

<div class="box">
  <h2>Escravo AI</h2>

  <label>Modelo:</label>
  <select id="model">
    <option value="openai-community/gpt2">GPT-2 (Texto)</option>
    <option value="SG161222/RealVisXL_V5.0">RealVisXL V5 (Imagem)</option>
    <option value="vdo/text-to-video-ms-1.7b">Text-to-Video 1.7B</option>
  </select>

  <label>Prompt:</label>
  <textarea id="prompt" placeholder="Escreva seu prompt..."></textarea>

  <button id="run">Executar IA</button>

  <div id="result"></div>
</div>


<script>
document.getElementById("run").onclick = async () => {
  const model = document.getElementById("model").value;
  const prompt = document.getElementById("prompt").value;
  const result = document.getElementById("result");

  result.innerHTML = "<p>ðŸ”„ Processando...</p>";

  const res = await fetch("/api/ia", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ model, prompt })
  });

  const data = await res.json();

  if (data.error) {
    result.innerHTML = `<p style="color:red;">Erro: ${data.error}</p>`;
    return;
  }

  // Texto
  if (typeof data.output === "string") {
    result.innerHTML = `<pre>${data.output}</pre>`;
    return;
  }

  // Imagem ou VÃ­deo
  if (data.output.url) {
    if (data.output.url.endsWith(".mp4")) {
      result.innerHTML = `<video controls width="400" src="${data.output.url}"></video>`;
    } else {
      result.innerHTML = `<img width="400" src="${data.output.url}" />`;
    }
    return;
  }

  result.innerHTML = `<pre>${JSON.stringify(data.output, null, 2)}</pre>`;
};
</script>

</body>
</html>
